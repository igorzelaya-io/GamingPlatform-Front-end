
<app-navbar-style-one></app-navbar-style-one>

<section class="page-title-area page-title-bg1">
    <div class="container">
        <div class="page-title-content">
            <br>
            <h1 title="{{challenge.challengeName}}">{{challenge.challengeName}}</h1>
            <button *ngIf="isUserAdmin" mat-button (click)="openDialogForFieldString('challengeName')" style="background-color: #1a0000;">
                <i class="bi bi-pencil-square" style="font-size: 20px; color: red"></i>
            </button>       
        </div>
    </div>
</section>

<section class="tournament-details-area ptb-100">
    <div class="container">
        <div class="tournament-details-desc">
            <span class="sub-title" *ngIf="!isUserAdmin">{{challengeMonthDate}} {{challengeMonth}} {{challengeYear}} / {{challengeTime}} / {{challenge.challengeRegion}}</span>
            <div class="container" *ngIf="isUserAdmin">
                <div class="row">
                    <div class="col-lg-3 col-md-12">
                        <span class="sub-title">{{challengeMonthDate}} {{challengeMonth}} {{challengeYear}} / {{challengeTime}}  {{challenge.challengeRegion}}</span>
                    </div>
                    <div class="col-lg-1 col-md-12">
                        <button mat-icon-button style="background-color: red; color: #1a0000" [matMenuTriggerFor]="challengeEdit">
                            <mat-icon>
                                more_vert
                            </mat-icon>
                        </button>
                    </div>
                </div>  
                <mat-menu #challengeEdit="matMenu">
                    <button mat-menu-item style="color: red; background-color: #1a0000" (click)="openDialogForDate()">
                        Edit Date and Time
                    </button>
                    <button mat-menu-item style="color: red; background-color: #1a0000" (click)="openDialogForCountry()">
                        Edit Challenge Country
                    </button>
                    <!-- <button mat-menu-item style="color: red; background-color: #1a0000" (click)="openDialogForPrizePool()">
                        Edit Challenge Cash Prize
                    </button> -->
                    <button mat-menu-item style="color: red; background-color: #1a0000" (click)="openDialogForEntryFee()">
                        Edit Challenge Entry Fee
                    </button>
                </mat-menu>
            </div>

            <!-- <h3>About the tournament</h3>
            <p>{{tournament.tournamentDescription}}</p> -->

            <ul class="tournament-meta">
                <li>
                    <div class="icon">
                        <i class="flaticon-coin"></i>
                    </div>
                    <span>${{challenge.challengeCashPrize}}</span>
                    Prize Pool
                </li>

                <!-- <li>
                    <div class="icon">
                        <i class="flaticon-game"></i>
                    </div>
                    <span>{{tournament.tournamentFormat}}</span>
                     Tournament Format
                </li> -->
                
                <li>
                    <div class="icon">
                        <i class="flaticon-game"></i>
                    </div>
                    <span>{{challenge.challengeGameMode}}</span>
                    Challenge Game Mode
                </li>

                <li>
                    <div class="icon">
                        <i class="flaticon-game-1"></i>
                    </div>
                    <span>{{challenge.challengePlatforms}}</span>
                    Challenge Platforms
                </li>

                <li>
                    <div class="icon">
                        <i class="flaticon-teamwork"></i>
                    </div>
                    <span>{{challenge.challengeMatchesNumber}}</span>
                    Challenge Matches Number
                </li>
                <li>
                    <div class="icon">
                        <i class="flaticon-teamwork"></i>
                    </div>
                    <span>{{challenge.challengeNumberOfPlayersPerTeam}}</span>
                    Team Size
                </li>
                <li>
                    <div class="icon">
                        <img src="assets/d1images/D1TokenBag.png">
                    </div>
                    <span>{{challenge.challengeTokenFee}}</span>
                    Challenge Points Entry Fee
                </li>
                <button mat-button style="background-color: #1a0000; color: red" *ngIf="isStartedChallenge && isUserAdmin && !isActivatedChallenge" (click)="openConfirmationDialogForChallengeInitialization()">
                    Start Challenge
                </button>
                <li *ngIf="!alreadyJoinedChallenge">
                    
                    <button mat-button style="background-color: #1a0000; color: red" *ngIf="!isTryingToJoinChallenge && !this.alreadyJoinedChallenge" (click)="isJoiningChallenge()">
                		Join Challenge
                    </button>
                    <div style="vertical-align: middle;" *ngIf="isTryingToJoinChallenge">
                        <div style="vertical-align: middle">
                            <h5 style="text-align: center">Select Team To Join Challenge</h5>
                        </div>
                        <div *ngIf="hasNoTeams">
                            <h5 class="alert alert-danger">
                                You currently have no teams to select.
                            </h5>
                        </div>
                        <div *ngFor="let team of userTeamsAvailableToJoinChallenge">
                            <div class="container" style="max-width: 400px; margin: auto;">
                                <div class="row">
                                   <div class="col-sm" style="vertical-align:middle">
                                        <img
                                            src="assets/d1images/anonymousteam.png"
                                            style="border: solid red 2px" 
                                        >
                                   </div>
                                   <div class="col-sm" style="vertical-align:middle">
                                        <h3 style="text-align:center">{{team.teamName}}</h3>
                                        <p style="text-align:center">{{team.teamCountry}}</p>
                                   </div>
                                   <div style="vertical-align: middle;" class="col-sm">
                                        <div class="container">
                                            <div class="row">
                                                <div class="col-sm" style="vertical-align: middle;">
                                                    <button mat-button style="background-color: #1a0000; color: red; width: 100%" (click)="selectTeamToJoinChallenge(team); clickSelectTeamButton()" [disabled]="isClickedSelectButton">
                                                        Select Team
                                                    </button>
                                                </div>
                                                <div class="col-sm" *ngIf="isClickedSelectButton" style="vertical-align: middle;">
                                                    <button mat-button style="background-color: #1a0000;color:red; width: 100%; margin-top:10px;" (click)="deselectTeamToJoinChallenge()">
                                                        Cancel
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                   </div> 
                                </div>
                            </div>
                        </div>
                        <button (click)="navigateToTeamCreation()" mat-button style="background-color: #1a0000; color: red; margin: 20px; width: 100%">Create Team</button>
                        <div style="vertical-align: middle;">
                            <button mat-button style="background-color: #1a0000; color: red; margin-left: 10px; width: 100%" *ngIf="!hasNoTeams" (click)="joinChallenge(); clickJoinChallengeButton();" [disabled]="isClickedJoinButton">
                                Join
                            </button>
                        </div>
                    </div>
                    <div *ngIf="isFailedChallengeJoin" style="vertical-align: middle;">
                        <div style="text-align: center;">
                            <h5 class="alert alert-danger">{{errorMessage}}</h5>
                        </div>
                    </div>
                </li>
                
                <li *ngIf="alreadyJoinedChallenge && !this.isUserAdmin">
                   <button mat-button style="background-color: #1a0000; color: red; margin-right: 5px;" (click)= "openConfirmationDialogForChallengeExit(); isClickedExitChallengeButton()" [disabled]="isClickedExitButton">
                        Exit Challenge
                   </button> 
                </li>
                <li *ngIf="isUserAdmin">
                    <div class="icon" style="margin-top: 10px; margin-left: 10px">
                        <button mat-button (click)="openConfirmationDialogForDeletion()" style="background-color: #1a0000; color: red; margin-bottom: 40px;">
                            <i style="font-size: 20px; color: red" class="bi bi-trash-fill"></i>
                        </button>                    
                    </div>
                </li>
            </ul>
        </div>
        
        <div class="matches-tabs">
            <ul class="nav nav-tabs" id="myTab" role="tablist">  

                <li class="nav-item" role="presentation"><a class="nav-link" id="all-matches-tab" data-toggle="tab" href="#all-matches" role="tab" aria-controls="all-matches" aria-selected="true">My Matches</a></li>

                <li class="nav-item" role="presentation"><a class="nav-link" id="upcoming-matches-tab" data-toggle="tab" href="#upcoming-matches" role="tab" aria-controls="upcoming-matches" aria-selected="false">All Matches</a></li>

                <li class="nav-item" role="presentation"><a class="nav-link" id="latest-result-tab" data-toggle="tab" href="#latest-result" role="tab" aria-controls="latest-result" aria-selected="false">Latest Result</a></li>
            
                
            </ul>
            
            <div class="tab-content" id="myTabContent">
                
                <div class="tab-pane fade show active" id="all-matches" role="tabpanel">
                    <div *ngIf="!isActivatedChallenge" style="vertical-align: middle;">
                        <h1 style="text-align: center">Challenge has not started</h1>
                    </div>
                    <div *ngIf="!isActivatedChallenge && !alreadyJoinedChallenge" style="vertical-align: middle;">
                        <h1 style="text-align: center;">Join challenge to access matches</h1>
                    </div>

                    <div *ngIf="isActivatedChallenge && !alreadyJoinedChallenge" style="vertical-align: middle;">
                        <h1 style="text-align: center">You are not registered in this challenge</h1>
                    </div>

                    <div *ngIf="userTeamActiveMatches.length === 0 && this.alreadyJoinedChallenge && isActivatedChallenge" style="vertical-align: middle">
                        <h1 style="text-align: center">You have no matches available</h1>
                    </div>
                        
                        <div *ngIf="isActivatedChallenge && alreadyJoinedChallenge && userTeamActiveMatches.length !== 0">
                            
                            <div *ngFor="let match of userTeamActiveMatches" class="single-matches-box">
                                <div class="row align-items-center">
                                    <div class="col-lg-5 col-md-12">
                                        <div class="matches-team">
                                            <!-- <img> -->
                                            <div class="content">
                                                <h3>{{match.matchLocalTeam.teamName}}</h3>
                                                <ul class="watch-list">
                                                    <!-- <li><span>Watch</span></li> -->
                                                    <!-- <li><a href="#" target="_blank" data-toggle="tooltip" data-placement="top" title="Watch on YouTube"><i class='bx bxl-youtube'></i></a></li>
                                                    <li><a href="#" target="_blank" data-toggle="tooltip" data-placement="top" title="Watch on Twitch"><i class='bx bxl-twitch'></i></a></li>
                                                    <li><a href="#" target="_blank" data-toggle="tooltip" data-placement="top" title="Watch on Vimeo"><i class='bx bxl-vimeo'></i></a></li> -->
                                                </ul>
                                        </div>
                                    </div>
                                </div>
        
                                <div class="col-lg-2 col-md-12">
                                    <div class="matches-result">
                                        <ul>
                                            <li>{{match.localTeamMatchScore}}</li>
                                            <li>{{match.awayTeamMatchScore}}</li>
                                        </ul>
                                        <span class="date-time"><button mat-button style="background-color: #1a0000;color : red" (click)="passMatch(match.matchId)">View Match</button></span>
                                    </div>
                                </div>

                                <div class="col-lg-5 col-md-12">
                                    <div class="matches-team right-image">
                                        <!-- <img src="assets/img/team2.png" alt="image"> -->
        
                                        <div class="content">
                                            <h3>{{match.matchAwayTeam.teamName}}</h3>
                                            <ul class="watch-list">
                                                <!-- <li><a href="#" target="_blank" data-toggle="tooltip" data-placement="top" title="Watch on YouTube"><i class='bx bxl-youtube'></i></a></li>
                                                <li><a href="#" target="_blank" data-toggle="tooltip" data-placement="top" title="Watch on Twitch"><i class='bx bxl-twitch'></i></a></li>
                                                <li><a href="#" target="_blank" data-toggle="tooltip" data-placement="top" title="Watch on Vimeo"><i class='bx bxl-vimeo'></i></a></li>
                                                <li><span>Watch</span></li> -->
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="upcoming-matches" role="tabpanel">
                    
                    <div *ngIf="!isActivatedChallenge" style="vertical-align: middle;">
                        <h1 style="text-align: center">Challenge has not started</h1>
                    </div>

                    <div *ngIf="challengeMatches.length === 0" style="vertical-align: middle;">
                        <h1 style="text-align: center">No matches available</h1>
                    </div>
                    <div *ngIf="this.isActivatedChallenge && challengeMatches.length !== 0">
                        <div *ngFor="let match of challengeMatches" class="single-matches-box">
                            <div class="row align-items-center">
                                <div class="col-lg-5 col-md-12">
                                    <div class="matches-team">
                                        <div class="content">
                                            <h3>{{match.matchLocalTeam.teamName}}</h3>
                                            <ul class="watch-list">
                                                
                                            </ul>
                                        </div>
                                    </div>
                                </div>
        
                                <div class="col-lg-2 col-md-12">
                                    <div class="matches-result">
                                        <ul>
                                            <li>{{match.localTeamMatchScore}}</li>
                                            <li>{{match.awayTeamMatchScore}}</li>
                                        </ul>
                                        <span class="date-time"><button mat-button style="background-color: #1a0000; color: red" (click)="passMatch(match.matchId)">View Match</button></span>
                                    </div>
                                </div>
        
                                <div class="col-lg-5 col-md-12">
                                    <div class="matches-team right-image">
                                        
        
                                        <div class="content">
                                            <h3>{{match.matchAwayTeam.teamName}}</h3>
                                            <ul class="watch-list">
                                                
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>

                <div class="tab-pane fade" id="latest-result" role="tabpanel">
                    <div *ngIf="!isStartedChallenge" style="vertical-align: middle;">
                        <h1 style="text-align: center">Challenge has not started</h1>
                    </div>
                    <div *ngIf="challengeInactiveMatches.length === 0" style="vertical-align: middle;">
                        <h1 style="text-align: center;">No matches available</h1>
                    </div>
                    <div *ngIf="isStartedChallenge && challengeInactiveMatches.length !== 0">
                        <div class="single-matches-box" *ngFor="let match of challengeInactiveMatches">
                            <div class="row align-items-center">
                                <div class="col-lg-5 col-md-12">
                                    <div class="matches-team">
                                        <!-- <img src="assets/img/team1.png" alt="image"> -->
        
                                        <div class="content">
                                            <h3>{{match.matchLocalTeam.teamName}}</h3>
                                            <ul class="watch-list">
                                                <!-- NOT INCLUDED -->
                                                <!-- <li><span>Watch</span></li>
                                                <li><a href="#" target="_blank" data-toggle="tooltip" data-placement="top" title="Watch on YouTube"><i class='bx bxl-youtube'></i></a></li>
                                                <li><a href="#" target="_blank" data-toggle="tooltip" data-placement="top" title="Watch on Twitch"><i class='bx bxl-twitch'></i></a></li>
                                                <li><a href="#" target="_blank" data-toggle="tooltip" data-placement="top" title="Watch on Vimeo"><i class='bx bxl-vimeo'></i></a></li> -->
                                            </ul>
                                        </div>
                                    </div>
                                </div>
        
                                <div class="col-lg-2 col-md-12">
                                    <div class="matches-result">
                                        <ul>
                                            <li>{{match.localTeamMatchScore}}</li>
                                            <li>{{match.awayTeamMatchScore}}</li>
                                        </ul>
                                        <span class="date-time"><button mat-button style="background-color: #1a0000; color:red;" (click)="passMatch(match.matchId)">View Match</button></span>
                                    </div>
                                </div>
        
                                <div class="col-lg-5 col-md-12">
                                    <div class="matches-team right-image">
                                        <!-- <img src="assets/img/team2.png" alt="image"> -->
        
                                        <div class="content">
                                            <h3>{{match.matchAwayTeam.teamName}}</h3>
                                            <ul class="watch-list">
                                                <!-- <li><a href="#" target="_blank" data-toggle="tooltip" data-placement="top" title="Watch on YouTube"><i class='bx bxl-youtube'></i></a></li>
                                                <li><a href="#" target="_blank" data-toggle="tooltip" data-placement="top" title="Watch on Twitch"><i class='bx bxl-twitch'></i></a></li>
                                                <li><a href="#" target="_blank" data-toggle="tooltip" data-placement="top" title="Watch on Vimeo"><i class='bx bxl-vimeo'></i></a></li>
                                                <li><span>Watch</span></li> -->
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- <section class="top-team-area pb-70">
    <app-top-ranking-team-style-two></app-top-ranking-team-style-two>
</section> -->

<footer class="footer-area bg-1b060a ptb-70">
    <app-footer-style-one></app-footer-style-one>
</footer>